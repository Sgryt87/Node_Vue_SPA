<div id="wrapper">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <admin-header></admin-header>
    <admin-sidenav></admin-sidenav>
  </nav>
  <div id="page-wrapper">
    <div class="row">
      <div class="panel panel-default ">
        <div class="panel-heading">Genres</div>
        <div [formGroup]="genresForm">
          <div class="col-xs-12 col-md-4 panel-body">
            <label for="addGenre">New Genre: </label>
            <input type="text"
                   id="addGenre"
                   class="form-control input-sm"
                   placeholder="Genre Name"
                   formControlName="newGenre"
            >
            <button type="button"
                    class="btn btn-success"
                    data-toggle="modal"
                    data-target="#addModal"
                    [disabled]="!!this.genresForm.get('newGenre')?.value?.length"
                    (click)="addGenre()"
            >
              Add Genre
            </button>
          </div>
          <div class="clearfix"></div>
          <div class="panel-body"
               formArrayName="genresArray"
               *ngFor="let genre of getGenresFormArray.controls; let i = index;">
            <div [formGroupName]="i" class="col-xs-12 col-md-4 pull-left">
              <input type="text"
                     class="form-control input-sm"
                     placeholder="Genre Name"
                     formControlName="genreName"
              >
              <button
                *ngIf="!isUpdateInProgress"
                (click)="updateGenre(getGenreFromFormArray(i))"
                class="btn btn-info btn-outline"
              >Update
              </button>
              <button
                *ngIf="isUpdateInProgress"
                (click)="confirmUpdate(getGenreFromFormArray(i))"
                class="btn btn-success btn-outline"
              >Ok
              </button>
              <button
                *ngIf="isUpdateInProgress"
                (click)="cancelUpdate(getGenreFromFormArray(i))"
                class="btn btn-warning btn-outline"
              >Cancel
              </button>
              <button
                *ngIf="!isUpdateInProgress"
                (click)="deleteGenre(getGenreFromFormArray(i))"
                class="btn btn-danger btn-outline"
              >Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
